<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-extend="PaymentScreen-Paymentmethods">
        <t t-jquery=".paymentmethods" t-operation="replace">
<!--            <p class="label payment-method-label">Payment Method</p>-->
            <t t-set="order" t-value="widget.pos.get_order()"/>
            <div class='paymentmethods'>
                <t t-set="keycode" t-value="112"/>
                <t t-foreach="widget.pos.payment_methods" t-as="payment_method">
                    <t t-if="order">
                        <t t-set="currency" t-value="order.currency"/>
                        <t t-set="change" t-value="order.get_change()"/>
                        <t t-set="is_return" t-value="order.is_return"/>
                        <t t-set="client" t-value="order.get_client()"/>
                        <t t-set="client_credit_balance" t-value="0"/>
                        <t t-set="client_wallet_amount" t-value="0"/>
                        <t t-if="client">
                            <t t-set="client_credit_balance" t-value="client.balance"/>
                        </t>
                        <t t-if="client">
                            <t t-set="client_wallet_amount" t-value="client.wallet"/>
                        </t>
                        <t t-if="is_return and client and payment_method.pos_method_type and payment_method.pos_method_type == 'credit'">
                            <span class="left_button paymentmethod" t-att-data-id="payment_method.id"
                                  t-att-keycode-id="keycode">
                                <div class="button-name">
                                    <t t-esc="payment_method.name"/>
                                    <t t-if="payment_method.journal and payment_method.journal.currency_id">
                                        (<t t-esc="payment_method.journal.currency_id[1]"/>)
                                    </t>
                                    <span class="keyboard-shortcut">
                                        <t t-if="keycode == 112">
                                            F1
                                        </t>
                                        <t t-if="keycode == 113">
                                            F2
                                        </t>
                                        <t t-if="keycode == 114">
                                            F3
                                        </t>
                                        <t t-if="keycode == 115">
                                            F4
                                        </t>
                                        <t t-if="keycode == 117">
                                            F6
                                        </t>
                                        <t t-if="keycode == 118">
                                            F7
                                        </t>
                                        <t t-if="keycode == 119">
                                            F8
                                        </t>
                                        <t t-if="keycode == 120">
                                            F9
                                        </t>
                                    </span>
                                    <t t-set="keycode" t-value="keycode + 1"/>
                                </div>
                            </span>
                        </t>
                        <t t-if="(payment_method.pos_method_type == 'default' or !payment_method.pos_method_type or (!is_return and payment_method.pos_method_type == 'credit' and client_credit_balance &gt; 0) or (payment_method.pos_method_type == 'wallet' and client_wallet_amount &gt; 0)) and (!payment_method.journal or (payment_method.journal and payment_method.journal.currency_id[0] == currency.id))">
                            <span class="left_button paymentmethod" t-att-data-id="payment_method.id"
                                  t-att-keycode-id="keycode">
                                <div class="button-name">
                                    <t t-esc="payment_method.name"/>
                                    <t t-if="payment_method.journal and payment_method.journal.currency_id">
                                        (<t t-esc="payment_method.journal.currency_id[1]"/>)
                                    </t>
                                    <span class="keyboard-shortcut">
                                        <t t-if="keycode == 112">
                                            F1
                                        </t>
                                        <t t-if="keycode == 113">
                                            F2
                                        </t>
                                        <t t-if="keycode == 114">
                                            F3
                                        </t>
                                        <t t-if="keycode == 115">
                                            F4
                                        </t>
                                        <t t-if="keycode == 117">
                                            F6
                                        </t>
                                        <t t-if="keycode == 118">
                                            F7
                                        </t>
                                        <t t-if="keycode == 119">
                                            F8
                                        </t>
                                        <t t-if="keycode == 120">
                                            F9
                                        </t>
                                    </span>
                                    <t t-set="keycode" t-value="keycode + 1"/>
                                </div>
                            </span>
                        </t>
                    </t>
                </t>
            </div>
        </t>
    </t>

    <t t-name="journal_list">
        <div class='paymentmethods'>
            <t t-if="widget.pos.get_order()">
                <t t-foreach="widget.pos.invoice_journals" t-as="journal">
                    <span t-attf-class='left_button paymentmethod journal #{ widget.pos.get_order().sale_journal and widget.pos.get_order().sale_journal == journal.id ? "highlight" : ""} '
                          t-att-data-id="journal['id']">
                        <div class="button-name">
                            <t t-esc="journal['name']"/>
                        </div>
                    </span>
                </t>
            </t>
        </div>
    </t>

    <t t-extend="PaymentScreen-Paymentlines">
        <t t-jquery="div[class*='message']" t-operation="replace">
            <div class='message'>
                Selecciona un método de pago de la izquierda..
                <br/>
                <div class="keyboard-shortcut" style="text-align: left !important; font-size: 13px !important">
                    1) Si el monto es 0, puede presionar <span class="keyboard-shortcut">Enter</span> para procesar el pedido rápido.
                    <br/>
                    2) Cantidad de llenado automático completo, presiona <span class="keyboard-shortcut"> la barra espaciadora </span>
                    <br/>
                    3) Presiona :<span class="keyboard-shortcut">C</span> para cambiar a la pantalla de clientes y configurar el cliente
                    <br/>
                    4) Presiona :<span class="keyboard-shortcut">I</span> si quieres facturar
                    4) Presiona :<span class="keyboard-shortcut">F1 a F9</span> para seleccionar el método de pago.
                </div>
            </div>
        </t>
        <t t-jquery="t[t-esc*='line.name']" t-operation="after">
            <t t-if="line.voucher_code">
                <li class="voucher_code">
                    Vale agregado: <i class="fa fa-gift"/>
                    <t t-esc='line.voucher_code'/>
                </li>
            </t>
        </t>
        <t t-jquery="td[class*='col-name']" t-operation="after">
            <t t-if="widget.pos.config.payment_reference or line.add_partial_amount_before">
                <td class='payment-ref-button btn btn-success' t-att-data-cid='line.cid' aria-label="Add Reference"
                    title="Add Reference">
                    <i class='fa fa-edit'/>
                    <t t-if="line.ref">
                        Ref: <t t-esc="line.ref"/>
                    </t>
                    <t t-else="">
                        Ref: N/A
                    </t>

                </td>
            </t>
        </t>
    </t>

    <t t-extend="PaymentScreenWidget">
        <t t-jquery="span[class='button next']" t-operation="replace">
            <span class="button next highlight" data-tag="next" style="">
                Finalizar
                <span class="keyboard-shortcut">Enter</span>
            </span>
        </t>
        <t t-jquery="span[class*='button back']" t-operation="replace">
            <span class="button back">
                Regresar
                <span class="keyboard-shortcut">ESC</span>
            </span>
        </t>
        <t t-jquery="h1" t-operation="replace">
            <h1>Pago</h1>
            <span class="card-issue"/>
        </t>
        <t t-jquery="div[class*='left-content']" t-operation="replace">
            <div class='left-content pc40 touch-scrollable scrollable-y'>
                <div class='paymentmethods-container'>
                </div>
            </div>
        </t>
        <t t-jquery="div[class*='right-content']" t-operation="replace">
            <div class='right-content pc60 touch-scrollable scrollable-y'>
                <section class='paymentlines-detail'>
                    <div class="summary-box-left">
                        <div class="summary-detail">
                            Bienvenido:
                            <span class="value client-name">
                            </span>
                        </div>
                    </div>
                    <div class="summary-box-left">
                        <div class="summary-detail">
                            Tarjeta:
                            <span class="value credit-card">
                            </span>
                        </div>
                    </div>
                    <div class="summary-box-left">
                        <div class="summary-detail">
                            Referencia de la Orden:
                            <span class="value order-ref">
                            </span>
                        </div>
                    </div>
                    <div class="summary-box-left">
                        <div class="summary-detail">
                            Monedero electrónico:
                            <span class="value wallet-card">
                            </span>
                        </div>
                    </div>
                    <div class="summary-box-right">
                        <div class="summary-detail">
                            Cantidad restante:
                            <span class="value remaining-amount">
                            </span>
                        </div>
                    </div>
                    <div class="summary-box-left">
                        <div class="summary-detail">
                            Puntos Programa Lealtad:
                            <span class="value points-card">
                            </span>
                        </div>
                    </div>
                    <div class="summary-box-right">
                        <div class="summary-detail">
                            Monto a pagar:
                            <span class='value due-amount'>
                            </span>
                        </div>
                    </div>
                    <div class="summary-box-right">
                        <div class="summary-detail">
                            Cambio:
                            <span class='value change-amount'>
                            </span>
                        </div>
                    </div>
                </section>
                <section class='paymentlines-container'/>
                <section class='payment-numpad'/>
                <section class='receipt-detail'/>
             </div>
            <div class='buttons-content touch-scrollable scrollable-y'>
                <div class='payment-buttons'>
                    <t t-set="order" t-value="widget.pos.get_order()"/>
                    <section class="payment-actions">
                        <div class='button js_set_customer'>
                            <i class='fa fa-user' role="img" aria-label="Customer" title="Customer"/>
                            <span class='js_customer_name'>
                                <t t-if="widget.pos.get_client()">
                                    <t t-esc="widget.pos.get_client().name"/>
                                </t>
                                <t t-if="!widget.pos.get_client()">
                                    Cliente
                                </t>
                            </span>
                        </div>
                        <t t-if='widget.pos.config.module_account'>
                                <t t-if='widget.pos.get_order()'>
                                    <div t-attf-class='button js_invoice #{ widget.pos.get_order().is_to_invoice() ? "highlight" : ""} '>
                                        <i class='fa fa-file-text-o'/>
                                        Facturar
                                        <span class="keyboard-shortcut">I</span>
                                    </div>
                                </t>
                            </t>
                        <div class='button js_email'>
                            <i class='fa fa-inbox'/>
                            Email
                            <span class="keyboard-shortcut">E</span>
                        </div>
                        <t t-if='widget.pos.config.tip_product_id'>
                            <div class='button js_tip'>
                                <i class='fa fa-heart'/>
                                Tip
                                <span class="keyboard-shortcut">T</span>
                            </div>
                        </t>
                        <t t-if='widget.pos.config.iface_cashdrawer'>
                            <div class='button js_cashdrawer'>
                                <i class='fa fa-archive'/>
                                Abrir cajón de dinero
                            </div>
                        </t>
                        <t t-if="widget.pos.config.paid_full">
                            <span class='left_button button_text button paid_full'>
                                <div class="button-icon">
                                    <img src="/pos_retail/static/src/icons/confirm.png" class="pos_logo"/>
                                </div>
                                <div class="button-name">
                                    Pago completo
                                    <span class="keyboard-shortcut">F</span>
                                </div>
                            </span>
                        </t>
                        <t t-if="widget.pos.config.paid_partial and order">
                            <span class='left_button button_text button paid_partial'
                                  title="Payment one part of Order Amount, Keyboard Event: p">
                                <div class="button-icon">
                                    <img src="/pos_retail/static/src/icons/save.png" class="pos_logo"/>
                                </div>
                                <div class="button-name">
                                    Pago parcial
                                    <span class="keyboard-shortcut">P</span>
                                </div>
                            </span>
                        </t>
                        <t t-if="widget.pos.config.allow_cashier_update_print_number">
                            <span class='left_button button_text button print_receipt_number'
                                  title="Receipt number will print">
                                <div class="button-icon">
                                    <img src="/pos_retail/static/src/icons/tip.png" class="pos_logo"/>
                                </div>
                                <div class="button-name">
                                    Número de recibo: <t t-esc="widget.pos.config.print_number"/>
                                </div>
                            </span>
                        </t>
                        <t t-if="widget.pos.config.category_wise_receipt">
                            <span t-attf-class="left_button button_text button category_wise_receipt  #{widget.pos.config.category_wise_receipt ? 'highlight' : '' }"
                                  title="Wise Product by Category">
                                <div class="button-icon">
                                    <img src="/pos_retail/static/src/icons/tip.png" class="pos_logo"/>
                                </div>
                                <div class="button-name">
                                    Categoría del recibo
                                </div>
                            </span>
                        </t>
                        <t t-if="widget.pos.config.allow_ticket_font_size">
                            <span class="left_button button_text button ticket_font_size" title="Font Size of Bill">
                                <div class="button-icon">
                                    <img src="/pos_retail/static/src/icons/tip.png" class="pos_logo"/>
                                </div>
                                <div class="button-name">
                                    Tamaño de letra para el ticket <t t-esc="widget.pos.config.ticket_font_size"/>
                                </div>
                            </span>
                        </t>
                        <t t-if="widget.pos.config.barcode_receipt">
                            <span t-attf-class="left_button button_text button barcode-receipt  #{widget.pos.config.barcode_receipt ? 'highlight' : '' }"
                                  title="Display Barcode on Receipt">
                                <div class="button-icon">
                                    <img src="/pos_retail/static/src/icons/tip.png" class="pos_logo"/>
                                </div>
                                <div class="button-name">
                                    Desplegar Código de Barras
                                </div>
                            </span>
                        </t>
                        <t t-if="widget.pos.config.auto_nextscreen_when_validate_payment">
                            <span t-attf-class="left_button button_text button auto_nextscreen_when_validate_payment  #{widget.pos.config.auto_nextscreen_when_validate_payment ? 'highlight' : '' }"
                                  title="Auto next screen when validate order">
                                <div class="button-icon">
                                    <img src="/pos_retail/static/src/icons/tip.png" class="pos_logo"/>
                                </div>
                                <div class="button-name">
                                    Pantalla siguiente automática
                                </div>
                            </span>
                        </t>
                        <t t-if="widget.pos.config.auto_print_web_receipt">
                            <span t-attf-class="left_button button_text button auto_print_web_receipt  #{widget.pos.config.auto_print_web_receipt ? 'highlight' : '' }"
                                  title="Auto print receipt via web">
                                <div class="button-icon">
                                    <img src="/pos_retail/static/src/icons/tip.png" class="pos_logo"/>
                                </div>
                                <div class="button-name">
                                    Impresión emergente automática
                                </div>
                            </span>
                        </t>
                        <t t-if="widget.pos.config.validate_order_without_receipt">
                            <span class='left_button button_text button next_without_print_receipt'
                                  title="Validate Order without Print Receipt">
                                <div class="button-icon">
                                    <img src="/pos_retail/static/src/icons/tip.png" class="pos_logo"/>
                                </div>
                                <div class="button-name">
                                    Validar no impresión de ticket
                                </div>
                            </span>
                        </t>
                        <t t-if="widget.quickly_datas and widget.quickly_datas.length > 0">
                            <t t-foreach="widget.quickly_datas" t-as="quickly">
                                <span class="left_button quickly-payment" t-att-data-id="quickly.id">
                                    <div class="button-icon">
                                        <img src="/pos_retail/static/src/icons/cashin.png" class="pos_logo"/>
                                    </div>
                                    <div class="button-name">
                                        <t t-esc="widget.format_currency(quickly.amount)"/>
                                    </div>
                                </span>
                            </t>
                        </t>
                    </section>
                 </div>
             </div>
        </t>
        <t t-jquery="section[class*='payment-numpad']" t-operation="replace">
            <section class="payment-numpad pads"/>
        </t>
        <t t-jquery=".right-content" t-operation="append">
            <t t-if="order and order.get_note()">
                <section class='set-note'>
                    <div class="order-note-information">
                        <div class="title">Notas de la Orden</div>
                        <div class="order-note">
                            <t t-esc="order.get_note() || ''"/>
                        </div>
                    </div>
                </section>
                <section class='signature-order'>
                    <div class="order-note-information">
                        <div class="title">Firma del Cliente</div>
                        <img class="product-img signature"
                             t-att-src="order.get_signature() || ''"
                             style="max-height:400px;max-width:100px"
                        />
                    </div>
                </section>
            </t>
        </t>
        <t t-jquery="div[class*='paymentmethods-container']" t-operation="after">
            <t t-if="widget.pos.invoice_journals.length > 0">
                <div class='invoice_journals'>
                    <p class="label payment-method-label"
                       style="color: black;font-size: 20px;">Diario de Facturación</p>
                </div>
            </t>
        </t>
        <t t-jquery="div[class*='js_set_customer']" t-operation="replace">
            <t t-set="order" t-value="widget.pos.get_order()"/>
            <span class="left_button js_set_customer">
                <div class="button-icon">
                    <img src="/pos_retail/static/src/icons/users.png" class="pos_logo"/>
                </div>
                <div class="button-name js_customer_name button_text">
                    <t t-if="widget.pos.get_client()">
                        <t t-esc="widget.pos.get_client().name"/>
                    </t>
                    <t t-if="!widget.pos.get_client()">
                        Cliente
                    </t>
                    <span class="keyboard-shortcut">C</span>
                </div>
            </span>
            <t t-if="order">
                <span class="left_button input_voucher">
                    <div class="button-icon">
                        <img src="/pos_retail/static/src/icons/voucher.png" class="pos_logo"/>
                    </div>
                    <div class="button-name">
                        Usar Vale
                        <span class="keyboard-shortcut">V</span>
                    </div>
                </span>
            </t>
            <t t-if="widget.pos.get_order()">
                <t t-set="order" t-value="widget.pos.get_order()"/>
                <t t-if="widget.pos.config.send_invoice_email">
                    <span t-attf-class='left_button send_invoice_email #{ order.is_email_invoice() ? "highlight" : ""} '>
                        <div class="button-icon">
                            <img src="/pos_retail/static/src/icons/email.png" class="pos_logo"/>
                        </div>
                        <div class="button-name">
                            Factura por Email
                            <span class="keyboard-shortcut">N</span>
                        </div>
                    </span>
                </t>
                <t t-if="widget.pos.config.signature_order">
                    <span class="left_button js_signature_order">
                        <div class="button-icon">
                            <img src="/pos_retail/static/src/icons/signature.png" class="pos_logo"/>
                        </div>
                        <div class="button-name">
                            Firma
                            <span class="keyboard-shortcut">S</span>
                        </div>
                    </span>
                </t>
                <t t-if="widget.pos.config.note_order">
                    <span class="left_button add_note">
                        <div class="button-icon">
                            <img src="/pos_retail/static/src/icons/note.png" class="pos_logo"/>
                        </div>
                        <div class="button-name">
                            Cambiar notas
                            <span class="keyboard-shortcut">N</span>
                        </div>
                    </span>
                </t>
                <t t-if="order.order_has_promotion_applied()">
                    <span t-attf-class='left_button button_remove_promotion #{ order.order_has_promotion_applied() ? "highlight" : ""} '>
                        <div class="button-icon">
                            <img src="/pos_retail/static/src/icons/trash.png" class="pos_logo"/>
                        </div>
                        <div class="button-name">
                            Quitar promociones
                            <span class="keyboard-shortcut">R</span>
                        </div>
                    </span>
                </t>
                <t t-if="widget.pos.promotion_ids and widget.pos.promotion_ids.length and !order.order_has_promotion_applied()">
                    <span t-attf-class='left_button button_promotion #{ !order.order_has_promotion_applied() ? "highlight" : ""} '>
                        <div class="button-icon">
                            <img src="/pos_retail/static/src/icons/trash.png" class="pos_logo"/>
                        </div>
                        <div class="button-name">
                            Agregar promociones
                        </div>
                    </span>
                </t>
            </t>
            <t t-if="order and order.get_total_with_tax()  &lt; 0">
                <span t-attf-class='left_button add_credit #{ order.is_add_credit() ? "highlight" : ""} '>
                    <div class="button-icon">
                        <img src="/pos_retail/static/src/icons/credit_card.png" class="pos_logo"/>
                    </div>
                    <div class="button-name">
                        Agregar Crédito
                        <span class="keyboard-shortcut">D</span>
                    </div>
                </span>
            </t>
            <t t-if="widget.pos.config.wallet">
                <span class="left_button add_wallet">
                    <div class="button-icon">
                        <img src="/pos_retail/static/src/icons/wallet.png" class="pos_logo"/>
                    </div>
                    <div class="button-name">
                        Agregar monedero
                        <span class="keyboard-shortcut">W</span>
                    </div>
                </span>
            </t>
        </t>
        <t t-jquery="div[class*='js_email']" t-operation="replace">
            <span class='left_button js_email'>
                <div class="button-icon">
                    <i class="fa fa-inbox"/>
                </div>
                <div class="button-name">
                    Email
                </div>
            </span>
        </t>
        <t t-jquery="t[t-if*='widget.pos.config.module_account']" t-operation="replace">
            <t t-if='widget.pos.get_order()'>
                <t t-set="order" t-value="widget.pos.get_order()"/>
                <span t-attf-class='left_button js_invoice #{ order.is_to_invoice() ? "highlight" : ""} '>
                    <div class="button-icon">
                        <img src="/pos_retail/static/src/icons/invoice.png" class="pos_logo"/>
                    </div>
                    <div class="button-name">
                        Factura
                        <span class="keyboard-shortcut">I</span>
                    </div>
                </span>
            </t>
        </t>
        <t t-jquery="t[t-if*='widget.pos.config.tip_product_id']" t-operation="replace">
            <t t-if='widget.pos.config.tip_product_id'>
                <t t-set="order" t-value="widget.pos.get_order()"/>
                <t t-if="order and order.get_total_with_tax() > 0">
                    <span class="left_button js_tip">
                        <div class="button-icon">
                            <img src="/pos_retail/static/src/icons/tip.png" class="pos_logo"/>
                        </div>
                        <div class="button-name">
                            Tip
                        </div>
                    </span>
                </t>
            </t>
        </t>
        <t t-jquery="t[t-if*='widget.pos.config.iface_cashdrawer']" t-operation="replace">
            <t t-if='widget.pos.config.iface_cashdrawer'>
                <span class="left_button js_cashdrawer">
                    <div class="button-icon">
                        <img src="/pos_retail/static/src/icons/open_cashbox.png" class="pos_logo"/>
                    </div>
                    <div class="button-name">
                        Abrir cajón de dinero
                    </div>
                </span>
            </t>
        </t>
    </t>


</templates>
